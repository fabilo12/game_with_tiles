{"ast":null,"code":"import _objectSpread from\"/home/lorenz/programming/azul_create_react_app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import getRandomInt from'../js_utils/getRandomInt.js';export default function fillRepos(state){var newState=_objectSpread({},state);for(var i in newState.repos.slice(0,-1)){// last repo is the middle and should not be filled\nvar repoFilled=nMissingInRepo(newState,i)===0;var _loop=function _loop(){var randId=getRandomInt(0,newState.bag.length,nMissingInRepo(newState,i));newState.repos[i]=newState.bag.filter(function(_,i){return randId.includes(i);});newState.bag=newState.bag.filter(function(_,i){return!randId.includes(i);});repoFilled=true;var bagHasEnoughTiles=newState.bag.length>=newState.tilesPerRepo;if(!bagHasEnoughTiles){newState=refillBag(newState);var bagHasEnoughTilesNow=newState.bag.length>=newState.tilesPerRepo;if(!bagHasEnoughTilesNow){throw new Error('There too few tiles in the game!');}}};while(!repoFilled){_loop();}}return newState;}function refillBag(state){var newState=_objectSpread({},state);newState.bag=newState.usedTiles;newState.usedTiles=[];return newState;}function nMissingInRepo(state,i){var nActual=state.repos[i].filter(function(el){return el!==state.emptyTileField;}).length;var nTarget=state.tilesPerRepo;return nTarget-nActual;}","map":{"version":3,"names":["getRandomInt","fillRepos","state","newState","i","repos","slice","repoFilled","nMissingInRepo","randId","bag","length","filter","_","includes","bagHasEnoughTiles","tilesPerRepo","refillBag","bagHasEnoughTilesNow","Error","usedTiles","nActual","el","emptyTileField","nTarget"],"sources":["/home/lorenz/programming/azul_create_react_app/src/azul_lib/fillRepos.js"],"sourcesContent":["import getRandomInt from '../js_utils/getRandomInt.js'\n\nexport default function fillRepos(state) {\n\n\tlet newState = { ...state };\n\n\tfor (let i in newState.repos.slice(0,-1)) {// last repo is the middle and should not be filled\n\t\tlet repoFilled = (nMissingInRepo(newState,i)===0);\n\t\twhile (!repoFilled) {\n\t\t\tconst randId = getRandomInt(\n\t\t\t\t0,\n\t\t\t\tnewState.bag.length,\n\t\t\t\tnMissingInRepo(newState,i)\n\t\t\t);\n\t\t\tnewState.repos[i] = newState.bag.filter((_,i) => randId.includes(i));\n\t\t\tnewState.bag = newState.bag.filter((_,i) => !(randId.includes(i)));\n\t\t\trepoFilled = true;\n\t\t\tconst bagHasEnoughTiles = (newState.bag.length >= newState.tilesPerRepo);\n\t\t\tif (!bagHasEnoughTiles) {\n\t\t\t\tnewState = refillBag(newState);\n\t\t\t\tconst bagHasEnoughTilesNow = (newState.bag.length >= newState.tilesPerRepo);\n\t\t\t\tif (!bagHasEnoughTilesNow) {\n\t\t\t\t\tthrow new Error('There too few tiles in the game!');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newState\n}\n\nfunction refillBag(state) {\n\tconst newState = { ...state };\n\n\tnewState.bag = newState.usedTiles;\n\tnewState.usedTiles = [];\n\n\treturn newState\n}\n\nfunction nMissingInRepo(state,i) {\n\tconst nActual = state.repos[i].filter(el => el !== state.emptyTileField).length;\n\tconst nTarget = state.tilesPerRepo;\n\treturn nTarget-nActual\n}"],"mappings":"mIAAA,MAAOA,aAAP,KAAyB,6BAAzB,CAEA,cAAe,SAASC,UAAT,CAAmBC,KAAnB,CAA0B,CAExC,GAAIC,SAAQ,kBAAQD,KAAR,CAAZ,CAEA,IAAK,GAAIE,EAAT,GAAcD,SAAQ,CAACE,KAAT,CAAeC,KAAf,CAAqB,CAArB,CAAuB,CAAC,CAAxB,CAAd,CAA0C,CAAC;AAC1C,GAAIC,WAAU,CAAIC,cAAc,CAACL,QAAD,CAAUC,CAAV,CAAd,GAA6B,CAA/C,CADyC,2BAGxC,GAAMK,OAAM,CAAGT,YAAY,CAC1B,CAD0B,CAE1BG,QAAQ,CAACO,GAAT,CAAaC,MAFa,CAG1BH,cAAc,CAACL,QAAD,CAAUC,CAAV,CAHY,CAA3B,CAKAD,QAAQ,CAACE,KAAT,CAAeD,CAAf,EAAoBD,QAAQ,CAACO,GAAT,CAAaE,MAAb,CAAoB,SAACC,CAAD,CAAGT,CAAH,QAASK,OAAM,CAACK,QAAP,CAAgBV,CAAhB,CAAT,EAApB,CAApB,CACAD,QAAQ,CAACO,GAAT,CAAeP,QAAQ,CAACO,GAAT,CAAaE,MAAb,CAAoB,SAACC,CAAD,CAAGT,CAAH,QAAS,CAAEK,MAAM,CAACK,QAAP,CAAgBV,CAAhB,CAAX,EAApB,CAAf,CACAG,UAAU,CAAG,IAAb,CACA,GAAMQ,kBAAiB,CAAIZ,QAAQ,CAACO,GAAT,CAAaC,MAAb,EAAuBR,QAAQ,CAACa,YAA3D,CACA,GAAI,CAACD,iBAAL,CAAwB,CACvBZ,QAAQ,CAAGc,SAAS,CAACd,QAAD,CAApB,CACA,GAAMe,qBAAoB,CAAIf,QAAQ,CAACO,GAAT,CAAaC,MAAb,EAAuBR,QAAQ,CAACa,YAA9D,CACA,GAAI,CAACE,oBAAL,CAA2B,CAC1B,KAAM,IAAIC,MAAJ,CAAU,kCAAV,CAAN,CACA,CACD,CAlBuC,EAEzC,MAAO,CAACZ,UAAR,CAAoB,SAiBnB,CACD,CAED,MAAOJ,SAAP,CACA,CAED,QAASc,UAAT,CAAmBf,KAAnB,CAA0B,CACzB,GAAMC,SAAQ,kBAAQD,KAAR,CAAd,CAEAC,QAAQ,CAACO,GAAT,CAAeP,QAAQ,CAACiB,SAAxB,CACAjB,QAAQ,CAACiB,SAAT,CAAqB,EAArB,CAEA,MAAOjB,SAAP,CACA,CAED,QAASK,eAAT,CAAwBN,KAAxB,CAA8BE,CAA9B,CAAiC,CAChC,GAAMiB,QAAO,CAAGnB,KAAK,CAACG,KAAN,CAAYD,CAAZ,EAAeQ,MAAf,CAAsB,SAAAU,EAAE,QAAIA,GAAE,GAAKpB,KAAK,CAACqB,cAAjB,EAAxB,EAAyDZ,MAAzE,CACA,GAAMa,QAAO,CAAGtB,KAAK,CAACc,YAAtB,CACA,MAAOQ,QAAO,CAACH,OAAf,CACA"},"metadata":{},"sourceType":"module"}