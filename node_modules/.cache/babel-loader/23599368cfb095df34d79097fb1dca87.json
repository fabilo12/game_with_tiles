{"ast":null,"code":"import addArrays from '../js_utils/addArrays.js';\nexport default function putTilesIntoRow(state, payload) {\n  const newState = { ...state\n  };\n  const drawn = newState.repos[newState.selectedTiles.repo].filter(el => el === newState.selectedTiles.color);\n  const rest = newState.repos[newState.selectedTiles.repo].filter(el => el !== newState.selectedTiles.color);\n  const targetRow = newState.rows[newState.playerAtTurn][payload.row];\n  const newTargetRow = addDrawnToTarget(drawn, targetRow, newState.emptyTileField);\n  newState.rows[newState.playerAtTurn][payload.row] = newTargetRow.newRow;\n  newState.penalties[newState.playerAtTurn] = addArrays(newState.penalties[newState.playerAtTurn], newTargetRow.penalties);\n  newState.repos[newState.selectedTiles.repo] = Array(newState.tilesPerRepo).fill(newState.emptyTileField);\n  return newState;\n}\n\nfunction addDrawnToTarget(drawn, targetRow, emptyTileField) {\n  const nTileInRow = targetRow.filter(el => el === drawn[0]).length;\n  const nDrawn = drawn.length;\n  const auxFilled = Array(Math.min(nTileInRow + nDrawn, targetRow.length)).fill(drawn[0]);\n  const auxEmpty = Array(targetRow.length - auxFilled.length).fill(emptyTileField);\n  return {\n    newRow: auxFilled.concat(auxEmpty),\n    penalties: tileColToDist(Array(nDrawn - (targetRow.length - nTileInRow)).fill(drawn[0]))\n  };\n} //function checkTargetValidity(selectedColor,targetColor,wall) {\n//\n//}\n\n/*if (newState.drawn.length > 0) {\n\tif (payload.repo === 'middle') {\n\t\tnewState[payload.repo] = Array(newState.nColors).fill(0);\n\t\tif (newState.startingTile === 'middle') {\n\t\t\tnewState.startingTile = newState.playerAtTurn;\n\t\t}\n\t} else {\n\t\tnewState.middle = addArrays(newState.middle, tileColToDist(tiles.filter(c => c !== color)));\n\t\tnewState[payload.repo] = [];\n\t}\n\treturn newState;\n} else {\n\talert(payload.repo + \" contains no tile of color \" + color.toString() + \"!\");\n}*/","map":{"version":3,"names":["addArrays","putTilesIntoRow","state","payload","newState","drawn","repos","selectedTiles","repo","filter","el","color","rest","targetRow","rows","playerAtTurn","row","newTargetRow","addDrawnToTarget","emptyTileField","newRow","penalties","Array","tilesPerRepo","fill","nTileInRow","length","nDrawn","auxFilled","Math","min","auxEmpty","concat","tileColToDist"],"sources":["/home/lorenz/programming/azul_create_react_app/src/reducer/putTilesIntoRow.js"],"sourcesContent":["import addArrays from '../js_utils/addArrays.js'\n\nexport default function putTilesIntoRow(state, payload) {\n\n\tconst newState = { ...state };\n\n\tconst drawn = newState.repos[newState.selectedTiles.repo].filter(el => el===newState.selectedTiles.color);\n\tconst rest = newState.repos[newState.selectedTiles.repo].filter(el => el!==newState.selectedTiles.color);\n\tconst targetRow = newState.rows[newState.playerAtTurn][payload.row];\n\tconst newTargetRow = addDrawnToTarget(drawn, targetRow, newState.emptyTileField);\n\n\tnewState.rows[newState.playerAtTurn][payload.row] = newTargetRow.newRow;\n\tnewState.penalties[newState.playerAtTurn] = addArrays(newState.penalties[newState.playerAtTurn],newTargetRow.penalties);\n\tnewState.repos[newState.selectedTiles.repo] = Array(newState.tilesPerRepo).fill(newState.emptyTileField);\n\t\n\treturn newState\n}\n\nfunction addDrawnToTarget(drawn, targetRow, emptyTileField) {\n\tconst nTileInRow = targetRow.filter(el => el===drawn[0]).length;\n\tconst nDrawn = drawn.length;\n\tconst auxFilled = Array(Math.min(nTileInRow+nDrawn,targetRow.length)).fill(drawn[0]);\n\tconst auxEmpty = Array(targetRow.length-auxFilled.length).fill(emptyTileField);\n\treturn {\n\t\tnewRow: auxFilled.concat(auxEmpty),\n\t\tpenalties: tileColToDist(Array(nDrawn-(targetRow.length-nTileInRow)).fill(drawn[0])),\n\t}\n}\n\n//function checkTargetValidity(selectedColor,targetColor,wall) {\n//\n//}\n\n/*if (newState.drawn.length > 0) {\n\tif (payload.repo === 'middle') {\n\t\tnewState[payload.repo] = Array(newState.nColors).fill(0);\n\t\tif (newState.startingTile === 'middle') {\n\t\t\tnewState.startingTile = newState.playerAtTurn;\n\t\t}\n\t} else {\n\t\tnewState.middle = addArrays(newState.middle, tileColToDist(tiles.filter(c => c !== color)));\n\t\tnewState[payload.repo] = [];\n\t}\n\treturn newState;\n} else {\n\talert(payload.repo + \" contains no tile of color \" + color.toString() + \"!\");\n}*/"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,0BAAtB;AAEA,eAAe,SAASC,eAAT,CAAyBC,KAAzB,EAAgCC,OAAhC,EAAyC;EAEvD,MAAMC,QAAQ,GAAG,EAAE,GAAGF;EAAL,CAAjB;EAEA,MAAMG,KAAK,GAAGD,QAAQ,CAACE,KAAT,CAAeF,QAAQ,CAACG,aAAT,CAAuBC,IAAtC,EAA4CC,MAA5C,CAAmDC,EAAE,IAAIA,EAAE,KAAGN,QAAQ,CAACG,aAAT,CAAuBI,KAArF,CAAd;EACA,MAAMC,IAAI,GAAGR,QAAQ,CAACE,KAAT,CAAeF,QAAQ,CAACG,aAAT,CAAuBC,IAAtC,EAA4CC,MAA5C,CAAmDC,EAAE,IAAIA,EAAE,KAAGN,QAAQ,CAACG,aAAT,CAAuBI,KAArF,CAAb;EACA,MAAME,SAAS,GAAGT,QAAQ,CAACU,IAAT,CAAcV,QAAQ,CAACW,YAAvB,EAAqCZ,OAAO,CAACa,GAA7C,CAAlB;EACA,MAAMC,YAAY,GAAGC,gBAAgB,CAACb,KAAD,EAAQQ,SAAR,EAAmBT,QAAQ,CAACe,cAA5B,CAArC;EAEAf,QAAQ,CAACU,IAAT,CAAcV,QAAQ,CAACW,YAAvB,EAAqCZ,OAAO,CAACa,GAA7C,IAAoDC,YAAY,CAACG,MAAjE;EACAhB,QAAQ,CAACiB,SAAT,CAAmBjB,QAAQ,CAACW,YAA5B,IAA4Cf,SAAS,CAACI,QAAQ,CAACiB,SAAT,CAAmBjB,QAAQ,CAACW,YAA5B,CAAD,EAA2CE,YAAY,CAACI,SAAxD,CAArD;EACAjB,QAAQ,CAACE,KAAT,CAAeF,QAAQ,CAACG,aAAT,CAAuBC,IAAtC,IAA8Cc,KAAK,CAAClB,QAAQ,CAACmB,YAAV,CAAL,CAA6BC,IAA7B,CAAkCpB,QAAQ,CAACe,cAA3C,CAA9C;EAEA,OAAOf,QAAP;AACA;;AAED,SAASc,gBAAT,CAA0Bb,KAA1B,EAAiCQ,SAAjC,EAA4CM,cAA5C,EAA4D;EAC3D,MAAMM,UAAU,GAAGZ,SAAS,CAACJ,MAAV,CAAiBC,EAAE,IAAIA,EAAE,KAAGL,KAAK,CAAC,CAAD,CAAjC,EAAsCqB,MAAzD;EACA,MAAMC,MAAM,GAAGtB,KAAK,CAACqB,MAArB;EACA,MAAME,SAAS,GAAGN,KAAK,CAACO,IAAI,CAACC,GAAL,CAASL,UAAU,GAACE,MAApB,EAA2Bd,SAAS,CAACa,MAArC,CAAD,CAAL,CAAoDF,IAApD,CAAyDnB,KAAK,CAAC,CAAD,CAA9D,CAAlB;EACA,MAAM0B,QAAQ,GAAGT,KAAK,CAACT,SAAS,CAACa,MAAV,GAAiBE,SAAS,CAACF,MAA5B,CAAL,CAAyCF,IAAzC,CAA8CL,cAA9C,CAAjB;EACA,OAAO;IACNC,MAAM,EAAEQ,SAAS,CAACI,MAAV,CAAiBD,QAAjB,CADF;IAENV,SAAS,EAAEY,aAAa,CAACX,KAAK,CAACK,MAAM,IAAEd,SAAS,CAACa,MAAV,GAAiBD,UAAnB,CAAP,CAAL,CAA4CD,IAA5C,CAAiDnB,KAAK,CAAC,CAAD,CAAtD,CAAD;EAFlB,CAAP;AAIA,C,CAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module"}