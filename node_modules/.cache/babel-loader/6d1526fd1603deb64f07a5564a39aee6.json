{"ast":null,"code":"import getRandomInt from '../js_utils/getRandomInt.js';\nimport fillRepos from './fillRepos.js'; //global settings\n\nconst N_COLORS = 5;\nconst TILE_COLOR_NAMES = ['blue', 'yellow', 'red', 'black', 'turquoise'];\nconst TILES_PER_REPO = 4;\nconst TILES_PER_COLOR = 20;\nconst EMPTY_TILE_FIELD = -1;\nconst NAME_LIST_DEFAULT = ['Player 1', 'Player 2', 'Player 3', 'Player 4'];\nconst NUM_PLAYER_DEFAULT = 3;\nexport default function gameState(playerList) {\n  //game hyperparameters\n  this.nColor = N_COLORS;\n  this.tileColorNames = TILE_COLOR_NAMES;\n  this.tilesPerRepo = TILES_PER_REPO;\n  this.tilesPerColor = TILES_PER_COLOR;\n  this.emptyTileField = EMPTY_TILE_FIELD;\n  this.nameListDefault = [...NAME_LIST_DEFAULT];\n  this.numPlayerDefault = NUM_PLAYER_DEFAULT; //state shared between players\n\n  this.nameListInput = typeof playerList === 'undefined' ? this.nameListDefault.slice(0, this.numPlayerDefault) : [...playerList];\n  this.playerList = typeof playerList === 'undefined' ? this.nameListDefault.slice(0, this.numPlayerDefault) : [...playerList];\n  this.numPlayerSelected = this.playerList.length;\n  this.nPlayer = this.playerList.length;\n  this.nRepos = 2 * this.nPlayer + 1;\n  this.isGameOver = false;\n  this.bag = Array.from(Array(N_COLORS), (_, i) => Array(TILES_PER_COLOR).fill(i)).flat();\n  this.usedTiles = [];\n  this.repos = Array(this.nRepos).fill().map(_ => Array(TILES_PER_REPO).fill(EMPTY_TILE_FIELD));\n  this.repos[this.nRepos] = []; //last repo is 'the middle', initially empty;\n\n  this.startingTile = 'middle';\n  this.playerAtTurn = getRandomInt(0, this.nPlayer)[0];\n  this.playMode = \"predefined\";\n  this.wallPattern = Array.from(Array(N_COLORS), (_, j) => Array.from(Array(N_COLORS), (_, i) => (N_COLORS - i + j) % N_COLORS)); //player specific state\n\n  this.scores = Array(this.nPlayer).fill(0);\n  this.rows = Array(this.nPlayer).fill().map(_ => Array.from(Array(N_COLORS), (_, i) => Array(i + 1).fill(EMPTY_TILE_FIELD)));\n  this.wall = Array(this.nPlayer).fill().map(_ => Array.from(Array(N_COLORS), _ => Array(N_COLORS).fill(EMPTY_TILE_FIELD)));\n  this.penalties = Array(this.nPlayer).fill().map(_ => []); //fill repos separately to facilitate reuse of fillRepos\n\n  const filledRepoState = fillRepos(this);\n  this.repos = filledRepoState.repos;\n  this.bag = filledRepoState.bag;\n  this.usedTiles = filledRepoState.usedTiles;\n}\n;","map":{"version":3,"names":["getRandomInt","fillRepos","N_COLORS","TILE_COLOR_NAMES","TILES_PER_REPO","TILES_PER_COLOR","EMPTY_TILE_FIELD","NAME_LIST_DEFAULT","NUM_PLAYER_DEFAULT","gameState","playerList","nColor","tileColorNames","tilesPerRepo","tilesPerColor","emptyTileField","nameListDefault","numPlayerDefault","nameListInput","slice","numPlayerSelected","length","nPlayer","nRepos","isGameOver","bag","Array","from","_","i","fill","flat","usedTiles","repos","map","startingTile","playerAtTurn","playMode","wallPattern","j","scores","rows","wall","penalties","filledRepoState"],"sources":["/home/lorenz/programming/azul_create_react_app/src/azul_lib/gameState.js"],"sourcesContent":["import getRandomInt from '../js_utils/getRandomInt.js';\nimport fillRepos from './fillRepos.js'\n\n//global settings\nconst N_COLORS = 5;\nconst TILE_COLOR_NAMES = ['blue', 'yellow', 'red', 'black', 'turquoise'];\nconst TILES_PER_REPO = 4;\nconst TILES_PER_COLOR = 20;\nconst EMPTY_TILE_FIELD = -1;\nconst NAME_LIST_DEFAULT = ['Player 1', 'Player 2', 'Player 3', 'Player 4'];\nconst NUM_PLAYER_DEFAULT = 3;\n\nexport default function gameState(\n\tplayerList\n) {\n\t//game hyperparameters\n\tthis.nColor = N_COLORS;\n\tthis.tileColorNames = TILE_COLOR_NAMES;\n\tthis.tilesPerRepo = TILES_PER_REPO;\n\tthis.tilesPerColor = TILES_PER_COLOR;\n\tthis.emptyTileField = EMPTY_TILE_FIELD;\n\tthis.nameListDefault = [...NAME_LIST_DEFAULT];\n\tthis.numPlayerDefault = NUM_PLAYER_DEFAULT;\n\n\t//state shared between players\n\tthis.nameListInput = (typeof(playerList) === 'undefined') ? \n\t\tthis.nameListDefault.slice(0, this.numPlayerDefault) : \n\t\t[...playerList];\n\tthis.playerList = (typeof(playerList) === 'undefined') ? \n\t\tthis.nameListDefault.slice(0, this.numPlayerDefault) : \n\t\t[...playerList];\n\tthis.numPlayerSelected = this.playerList.length;\n\tthis.nPlayer = this.playerList.length;\n\tthis.nRepos = 2 * this.nPlayer + 1;\n\tthis.isGameOver = false;\n\tthis.bag = Array.from(\n\t\tArray(N_COLORS), (_, i) => Array(TILES_PER_COLOR).fill(i)\n\t).flat();\n\tthis.usedTiles = [];\n\tthis.repos = Array(this.nRepos).fill().map(\n\t\t_ => Array(TILES_PER_REPO).fill(EMPTY_TILE_FIELD)\n\t);\n\tthis.repos[this.nRepos] = [];//last repo is 'the middle', initially empty;\n\tthis.startingTile = 'middle';\n\tthis.playerAtTurn = getRandomInt(0, this.nPlayer)[0];\n\tthis.playMode = \"predefined\";\n\tthis.wallPattern = Array.from(\n\t\tArray(N_COLORS),\n\t\t(_, j) => Array.from(\n\t\t\tArray(N_COLORS),\n\t\t\t(_, i) => (N_COLORS - i + j) % N_COLORS\n\t\t)\n\t);\n\n\t//player specific state\n\tthis.scores = Array(this.nPlayer).fill(0);\n\tthis.rows = Array(this.nPlayer).fill().map(\n\t\t_ => Array.from(\n\t\t\tArray(N_COLORS), (_, i) => Array(i + 1).fill(EMPTY_TILE_FIELD)\n\t\t)\n\t);\n\tthis.wall = Array(this.nPlayer).fill().map(\n\t\t_ => Array.from(\n\t\t\tArray(N_COLORS), _ => Array(N_COLORS).fill(EMPTY_TILE_FIELD)\n\t\t)\n\t);\n\tthis.penalties = Array(this.nPlayer).fill().map(_ => []);\n\n\t//fill repos separately to facilitate reuse of fillRepos\n\tconst filledRepoState = fillRepos(this);\n\tthis.repos = filledRepoState.repos;\n\tthis.bag = filledRepoState.bag;\n\tthis.usedTiles = filledRepoState.usedTiles;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}