{"ast":null,"code":"import addArrays from '../js_utils/addArrays.js';\nimport tileColToDist from '../azul_lib/tileColToDist.js';\nexport default function putTilesIntoRow(state, payload) {\n  const newState = { ...state\n  };\n  const drawn = newState.repos[newState.selectedTiles.repo].filter(el => el === newState.selectedTiles.color);\n  const rest = tileColToDist(newState.repos[newState.selectedTiles.repo].filter(el => el !== newState.selectedTiles.color), newState.nColor);\n  const targetRow = newState.rows[newState.playerAtTurn][payload.row];\n  const newTargetRow = addDrawnToTarget(drawn, targetRow, newState); //console.log(newTargetRow.newRow)\n\n  console.log('middle:');\n  console.log(newState.middle);\n  console.log('rest:');\n  console.log(rest);\n  console.log('added:');\n  console.log(addArrays(newState.middle, rest));\n  newState.rows[newState.playerAtTurn][payload.row] = newTargetRow.newRow;\n  newState.penalties[newState.playerAtTurn] = addArrays(newState.penalties[newState.playerAtTurn], newTargetRow.penalties);\n  newState.middle = addArrays(newState.middle, rest);\n  newState.repos[newState.selectedTiles.repo] = Array(newState.tilesPerRepo).fill(newState.emptyTileField);\n  return newState;\n}\n\nfunction addDrawnToTarget(drawn, targetRow, st) {\n  const nTileInRow = targetRow.filter(el => el === drawn[0]).length;\n  const nDrawn = drawn.length;\n  const auxFilled = Array(Math.min(nTileInRow + nDrawn, targetRow.length)).fill(drawn[0]);\n  const auxEmpty = Array(targetRow.length - auxFilled.length).fill(st.emptyTileField);\n  return {\n    newRow: auxFilled.concat(auxEmpty),\n    penalties: tileColToDist(Array(Math.max(0, nDrawn - (targetRow.length - nTileInRow))).fill(drawn[0]), st.nColor)\n  };\n} //function checkTargetValidity(selectedColor,targetColor,wall) {\n//\n//}","map":{"version":3,"names":["addArrays","tileColToDist","putTilesIntoRow","state","payload","newState","drawn","repos","selectedTiles","repo","filter","el","color","rest","nColor","targetRow","rows","playerAtTurn","row","newTargetRow","addDrawnToTarget","console","log","middle","newRow","penalties","Array","tilesPerRepo","fill","emptyTileField","st","nTileInRow","length","nDrawn","auxFilled","Math","min","auxEmpty","concat","max"],"sources":["/home/lorenz/programming/azul_create_react_app/src/reducer/putTilesIntoRow.js"],"sourcesContent":["import addArrays from '../js_utils/addArrays.js'\nimport tileColToDist from '../azul_lib/tileColToDist.js'\n\nexport default function putTilesIntoRow(state, payload) {\n\n\tconst newState = { ...state };\n\n\tconst drawn = newState.repos[newState.selectedTiles.repo].filter(\n\t\tel => el===newState.selectedTiles.color\n\t);\n\tconst rest = tileColToDist(newState.repos[newState.selectedTiles.repo].filter(\n\t\tel => el!==newState.selectedTiles.color), newState.nColor\n\t);\n\tconst targetRow = newState.rows[newState.playerAtTurn][payload.row];\n\tconst newTargetRow = addDrawnToTarget(drawn, targetRow, newState);\n\n\t//console.log(newTargetRow.newRow)\n\tconsole.log('middle:')\n\tconsole.log(newState.middle)\n\tconsole.log('rest:')\n\tconsole.log(rest)\n\tconsole.log('added:')\n\tconsole.log(addArrays(newState.middle, rest))\n\tnewState.rows[newState.playerAtTurn][payload.row] = newTargetRow.newRow;\n\tnewState.penalties[newState.playerAtTurn] = addArrays(\n\t\tnewState.penalties[newState.playerAtTurn],newTargetRow.penalties\n\t);\n\tnewState.middle = addArrays(newState.middle, rest);\n\tnewState.repos[newState.selectedTiles.repo] = \n\t\tArray(newState.tilesPerRepo).fill(newState.emptyTileField);\n\n\treturn newState\n}\n\nfunction addDrawnToTarget(drawn, targetRow, st) {\n\tconst nTileInRow = targetRow.filter(el => el===drawn[0]).length;\n\tconst nDrawn = drawn.length;\n\tconst auxFilled = Array(Math.min(nTileInRow + nDrawn,targetRow.length)).fill(drawn[0]);\n\tconst auxEmpty = Array(targetRow.length - auxFilled.length).fill(st.emptyTileField);\n\treturn {\n\t\tnewRow: auxFilled.concat(auxEmpty),\n\t\tpenalties: tileColToDist(\n\t\t\tArray(Math.max(0, nDrawn - (targetRow.length - nTileInRow))).fill(drawn[0]), \n\t\t\tst.nColor\n\t\t\t),\n\t}\n}\n\n//function checkTargetValidity(selectedColor,targetColor,wall) {\n//\n//}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}