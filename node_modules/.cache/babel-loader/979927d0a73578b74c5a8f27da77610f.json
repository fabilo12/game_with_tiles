{"ast":null,"code":"import { tileDist, addArrays } from './utils.js';\nexport function drawTiles(state, payload) {\n  const player = payload.player;\n  const color = payload.color;\n  const tiles = payload.repo === 'middle' ? state.middle[player] : tileDist(state[payload.repo]);\n\n  if (tileDist[color] > 0) {\n    state[player].drawn = Array(NUM_COLORS).fill(0);\n    state[player].drawn[color] = tileDist[color];\n    tileDist[color] = 0;\n\n    if (repo === \"middle\") {\n      if (state.startingTile === \"middle\") {\n        state.startingTile = player;\n      }\n    } else {\n      state.middle = addArrays(state.middle, tileDist);\n      tileDist = Array(NUM_COLORS).fill(0);\n    }\n\n    let drawnColor = allOfOneColor(state[player].drawn);\n\n    if (!drawnColor.allOfOne) {\n      console.log(\"Detected more than one color.\");\n    }\n\n    if (drawnColor.color === -1) {\n      console.log(\"No color was drawn.\");\n    }\n\n    return state;\n  } else {\n    //TODO: Think about what should happen here\n    throw new Error(repo + \" contains no tile of color \" + color.toString() + \"!\");\n  }\n}","map":{"version":3,"names":["tileDist","addArrays","drawTiles","state","payload","player","color","tiles","repo","middle","drawn","Array","NUM_COLORS","fill","startingTile","drawnColor","allOfOneColor","allOfOne","console","log","Error","toString"],"sources":["/home/lorenz/programming/azul_create_react_app/src/reducerFunctions.js"],"sourcesContent":["import {tileDist, addArrays} from './utils.js'\n\nexport function drawTiles(state, payload) {\n\t\n\tconst player = payload.player;\n\tconst color = payload.color;\n\tconst tiles = payload.repo==='middle'\n\t? state.middle[player]\n\t: tileDist(state[payload.repo]);\n\n\tif (tileDist[color] > 0) {\n\t\tstate[player].drawn = Array(NUM_COLORS).fill(0);\n\t\tstate[player].drawn[color] = tileDist[color];\n\t\ttileDist[color] = 0;\n\t\tif (repo === \"middle\") {\n\t\t\tif (state.startingTile === \"middle\") {\n\t\t\t\tstate.startingTile = player;\n\t\t\t}\n\t\t} else {\n\t\t\tstate.middle = addArrays(state.middle, tileDist);\n\t\t\ttileDist = Array(NUM_COLORS).fill(0);\n\t\t}\n\t\tlet drawnColor = allOfOneColor(state[player].drawn);\n\t\tif (!drawnColor.allOfOne) {\n\t\t\tconsole.log(\"Detected more than one color.\")\n\t\t}\n\t\tif (drawnColor.color === -1) {\n\t\t\tconsole.log(\"No color was drawn.\")\n\t\t}\n\t\treturn state;\n\t} else {\n\t\t//TODO: Think about what should happen here\n\t\tthrow new Error(repo + \" contains no tile of color \" + color.toString() + \"!\");\n\t}\n}"],"mappings":"AAAA,SAAQA,QAAR,EAAkBC,SAAlB,QAAkC,YAAlC;AAEA,OAAO,SAASC,SAAT,CAAmBC,KAAnB,EAA0BC,OAA1B,EAAmC;EAEzC,MAAMC,MAAM,GAAGD,OAAO,CAACC,MAAvB;EACA,MAAMC,KAAK,GAAGF,OAAO,CAACE,KAAtB;EACA,MAAMC,KAAK,GAAGH,OAAO,CAACI,IAAR,KAAe,QAAf,GACZL,KAAK,CAACM,MAAN,CAAaJ,MAAb,CADY,GAEZL,QAAQ,CAACG,KAAK,CAACC,OAAO,CAACI,IAAT,CAAN,CAFV;;EAIA,IAAIR,QAAQ,CAACM,KAAD,CAAR,GAAkB,CAAtB,EAAyB;IACxBH,KAAK,CAACE,MAAD,CAAL,CAAcK,KAAd,GAAsBC,KAAK,CAACC,UAAD,CAAL,CAAkBC,IAAlB,CAAuB,CAAvB,CAAtB;IACAV,KAAK,CAACE,MAAD,CAAL,CAAcK,KAAd,CAAoBJ,KAApB,IAA6BN,QAAQ,CAACM,KAAD,CAArC;IACAN,QAAQ,CAACM,KAAD,CAAR,GAAkB,CAAlB;;IACA,IAAIE,IAAI,KAAK,QAAb,EAAuB;MACtB,IAAIL,KAAK,CAACW,YAAN,KAAuB,QAA3B,EAAqC;QACpCX,KAAK,CAACW,YAAN,GAAqBT,MAArB;MACA;IACD,CAJD,MAIO;MACNF,KAAK,CAACM,MAAN,GAAeR,SAAS,CAACE,KAAK,CAACM,MAAP,EAAeT,QAAf,CAAxB;MACAA,QAAQ,GAAGW,KAAK,CAACC,UAAD,CAAL,CAAkBC,IAAlB,CAAuB,CAAvB,CAAX;IACA;;IACD,IAAIE,UAAU,GAAGC,aAAa,CAACb,KAAK,CAACE,MAAD,CAAL,CAAcK,KAAf,CAA9B;;IACA,IAAI,CAACK,UAAU,CAACE,QAAhB,EAA0B;MACzBC,OAAO,CAACC,GAAR,CAAY,+BAAZ;IACA;;IACD,IAAIJ,UAAU,CAACT,KAAX,KAAqB,CAAC,CAA1B,EAA6B;MAC5BY,OAAO,CAACC,GAAR,CAAY,qBAAZ;IACA;;IACD,OAAOhB,KAAP;EACA,CApBD,MAoBO;IACN;IACA,MAAM,IAAIiB,KAAJ,CAAUZ,IAAI,GAAG,6BAAP,GAAuCF,KAAK,CAACe,QAAN,EAAvC,GAA0D,GAApE,CAAN;EACA;AACD"},"metadata":{},"sourceType":"module"}