{"ast":null,"code":"import { tileDist, addArrays } from './utils.js';\nexport function drawTiles(state, payload) {\n  const player = payload.player;\n  const color = payload.color;\n  const tileDist = payload.repo === 'middle' ? state.middle[player] : tileDist(state[payload.repo]);\n\n  if (state[repo][color] > 0) {\n    state[player].drawn = Array(NUM_COLORS).fill(0);\n    state[player].drawn[color] = state[repo][color];\n    state[repo][color] = 0;\n\n    if (repo === \"middle\") {\n      if (state.startingTile === \"middle\") {\n        state.startingTile = player;\n      }\n    } else {\n      state.middle = addArrays(state.middle, state[repo]);\n      state[repo] = Array(NUM_COLORS).fill(0);\n    }\n\n    let drawnColor = allOfOneColor(state[player].drawn);\n\n    if (!drawnColor.allOfOne) {\n      console.log(\"Detected more than one color.\");\n    }\n\n    if (drawnColor.color === -1) {\n      console.log(\"No color was drawn.\");\n    }\n\n    return state;\n  } else {\n    //TODO: Think about what should happen here\n    throw new Error(repo + \" contains no tile of color \" + color.toString() + \"!\");\n  }\n}","map":{"version":3,"names":["tileDist","addArrays","drawTiles","state","payload","player","color","repo","middle","drawn","Array","NUM_COLORS","fill","startingTile","drawnColor","allOfOneColor","allOfOne","console","log","Error","toString"],"sources":["/home/lorenz/programming/azul_create_react_app/src/reducerFunctions.js"],"sourcesContent":["import {tileDist, addArrays} from './utils.js'\n\nexport function drawTiles(state, payload) {\n\t\n\tconst player = payload.player;\n\tconst color = payload.color;\n\tconst tileDist = payload.repo==='middle'\n\t? state.middle[player]\n\t: tileDist(state[payload.repo]);\n\n\tif (state[repo][color] > 0) {\n\t\tstate[player].drawn = Array(NUM_COLORS).fill(0);\n\t\tstate[player].drawn[color] = state[repo][color];\n\t\tstate[repo][color] = 0;\n\t\tif (repo === \"middle\") {\n\t\t\tif (state.startingTile === \"middle\") {\n\t\t\t\tstate.startingTile = player;\n\t\t\t}\n\t\t} else {\n\t\t\tstate.middle = addArrays(state.middle, state[repo]);\n\t\t\tstate[repo] = Array(NUM_COLORS).fill(0);\n\t\t}\n\t\tlet drawnColor = allOfOneColor(state[player].drawn);\n\t\tif (!drawnColor.allOfOne) {\n\t\t\tconsole.log(\"Detected more than one color.\")\n\t\t}\n\t\tif (drawnColor.color === -1) {\n\t\t\tconsole.log(\"No color was drawn.\")\n\t\t}\n\t\treturn state;\n\t} else {\n\t\t//TODO: Think about what should happen here\n\t\tthrow new Error(repo + \" contains no tile of color \" + color.toString() + \"!\");\n\t}\n}"],"mappings":"AAAA,SAAQA,QAAR,EAAkBC,SAAlB,QAAkC,YAAlC;AAEA,OAAO,SAASC,SAAT,CAAmBC,KAAnB,EAA0BC,OAA1B,EAAmC;EAEzC,MAAMC,MAAM,GAAGD,OAAO,CAACC,MAAvB;EACA,MAAMC,KAAK,GAAGF,OAAO,CAACE,KAAtB;EACA,MAAMN,QAAQ,GAAGI,OAAO,CAACG,IAAR,KAAe,QAAf,GACfJ,KAAK,CAACK,MAAN,CAAaH,MAAb,CADe,GAEfL,QAAQ,CAACG,KAAK,CAACC,OAAO,CAACG,IAAT,CAAN,CAFV;;EAIA,IAAIJ,KAAK,CAACI,IAAD,CAAL,CAAYD,KAAZ,IAAqB,CAAzB,EAA4B;IAC3BH,KAAK,CAACE,MAAD,CAAL,CAAcI,KAAd,GAAsBC,KAAK,CAACC,UAAD,CAAL,CAAkBC,IAAlB,CAAuB,CAAvB,CAAtB;IACAT,KAAK,CAACE,MAAD,CAAL,CAAcI,KAAd,CAAoBH,KAApB,IAA6BH,KAAK,CAACI,IAAD,CAAL,CAAYD,KAAZ,CAA7B;IACAH,KAAK,CAACI,IAAD,CAAL,CAAYD,KAAZ,IAAqB,CAArB;;IACA,IAAIC,IAAI,KAAK,QAAb,EAAuB;MACtB,IAAIJ,KAAK,CAACU,YAAN,KAAuB,QAA3B,EAAqC;QACpCV,KAAK,CAACU,YAAN,GAAqBR,MAArB;MACA;IACD,CAJD,MAIO;MACNF,KAAK,CAACK,MAAN,GAAeP,SAAS,CAACE,KAAK,CAACK,MAAP,EAAeL,KAAK,CAACI,IAAD,CAApB,CAAxB;MACAJ,KAAK,CAACI,IAAD,CAAL,GAAcG,KAAK,CAACC,UAAD,CAAL,CAAkBC,IAAlB,CAAuB,CAAvB,CAAd;IACA;;IACD,IAAIE,UAAU,GAAGC,aAAa,CAACZ,KAAK,CAACE,MAAD,CAAL,CAAcI,KAAf,CAA9B;;IACA,IAAI,CAACK,UAAU,CAACE,QAAhB,EAA0B;MACzBC,OAAO,CAACC,GAAR,CAAY,+BAAZ;IACA;;IACD,IAAIJ,UAAU,CAACR,KAAX,KAAqB,CAAC,CAA1B,EAA6B;MAC5BW,OAAO,CAACC,GAAR,CAAY,qBAAZ;IACA;;IACD,OAAOf,KAAP;EACA,CApBD,MAoBO;IACN;IACA,MAAM,IAAIgB,KAAJ,CAAUZ,IAAI,GAAG,6BAAP,GAAuCD,KAAK,CAACc,QAAN,EAAvC,GAA0D,GAApE,CAAN;EACA;AACD"},"metadata":{},"sourceType":"module"}