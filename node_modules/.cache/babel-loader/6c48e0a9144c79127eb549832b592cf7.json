{"ast":null,"code":"import _toConsumableArray from\"/home/lorenz/programming/azul_create_react_app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import getRandomInt from'../js_utils/getRandomInt.js';import fillRepos from'./fillRepos.js';//global settings\nvar N_COLORS=5;var TILE_COLOR_NAMES=['Blue','Yellow','Red','Black','Turquoise'];var TILES_PER_REPO=4;var TILES_PER_COLOR=20;var EMPTY_TILE_FIELD=-1;var NAME_LIST_DEFAULT=['Player 1','Player 2','Player 3','Player 4'];var NUM_PLAYER_DEFAULT=4;export default function gameState(playerList){//game hyperparameters\nthis.nColor=N_COLORS;this.tileColorNames=TILE_COLOR_NAMES;this.tilesPerRepo=TILES_PER_REPO;this.tilesPerColor=TILES_PER_COLOR;this.emptyTileField=EMPTY_TILE_FIELD;this.nameListDefault=[].concat(NAME_LIST_DEFAULT);this.numPlayerDefault=NUM_PLAYER_DEFAULT;//state shared between players\nthis.nameListInput=typeof playerList==='undefined'?this.nameListDefault.slice(0,this.numPlayerDefault):_toConsumableArray(playerList);this.playerList=typeof playerList==='undefined'?this.nameListDefault.slice(0,this.numPlayerDefault):_toConsumableArray(playerList);this.numPlayerSelected=this.playerList.length;this.nPlayer=this.playerList.length;this.nRepos=2*this.nPlayer+1;this.isGameOver=false;this.bag=Array.from(Array(N_COLORS),function(_,i){return Array(TILES_PER_COLOR).fill(i);}).flat();this.usedTiles=[];this.repos=Array(this.nRepos).fill().map(function(_){return Array(TILES_PER_REPO).fill(EMPTY_TILE_FIELD);});this.repos[this.nRepos]=[];//last repo is 'the middle', initially empty;\nthis.startingTile='middle';this.playerAtTurn=getRandomInt(0,this.nPlayer)[0];this.playMode=\"predefined\";this.wallPattern=Array.from(Array(N_COLORS),function(_,j){return Array.from(Array(N_COLORS),function(_,i){return(N_COLORS-i+j)%N_COLORS;});});//player specific state\nthis.scores=Array(this.nPlayer).fill(0);this.rows=Array(this.nPlayer).fill().map(function(_){return Array.from(Array(N_COLORS),function(_,i){return Array(i+1).fill(EMPTY_TILE_FIELD);});});this.wall=Array(this.nPlayer).fill().map(function(_){return Array.from(Array(N_COLORS),function(_){return Array(N_COLORS).fill(EMPTY_TILE_FIELD);});});this.penalties=Array(this.nPlayer).fill().map(function(_){return[];});//fill repos separately to facilitate reuse of fillRepos\nvar filledRepoState=fillRepos(this);this.repos=filledRepoState.repos;this.bag=filledRepoState.bag;this.usedTiles=filledRepoState.usedTiles;};","map":{"version":3,"names":["getRandomInt","fillRepos","N_COLORS","TILE_COLOR_NAMES","TILES_PER_REPO","TILES_PER_COLOR","EMPTY_TILE_FIELD","NAME_LIST_DEFAULT","NUM_PLAYER_DEFAULT","gameState","playerList","nColor","tileColorNames","tilesPerRepo","tilesPerColor","emptyTileField","nameListDefault","numPlayerDefault","nameListInput","slice","numPlayerSelected","length","nPlayer","nRepos","isGameOver","bag","Array","from","_","i","fill","flat","usedTiles","repos","map","startingTile","playerAtTurn","playMode","wallPattern","j","scores","rows","wall","penalties","filledRepoState"],"sources":["/home/lorenz/programming/azul_create_react_app/src/azul_lib/gameState.js"],"sourcesContent":["import getRandomInt from '../js_utils/getRandomInt.js';\nimport fillRepos from './fillRepos.js'\n\n//global settings\nconst N_COLORS = 5;\nconst TILE_COLOR_NAMES = ['Blue', 'Yellow', 'Red', 'Black', 'Turquoise'];\nconst TILES_PER_REPO = 4;\nconst TILES_PER_COLOR = 20;\nconst EMPTY_TILE_FIELD = -1;\nconst NAME_LIST_DEFAULT = ['Player 1', 'Player 2', 'Player 3', 'Player 4'];\nconst NUM_PLAYER_DEFAULT = 4;\n\nexport default function gameState(\n\tplayerList\n) {\n\t//game hyperparameters\n\tthis.nColor = N_COLORS;\n\tthis.tileColorNames = TILE_COLOR_NAMES;\n\tthis.tilesPerRepo = TILES_PER_REPO;\n\tthis.tilesPerColor = TILES_PER_COLOR;\n\tthis.emptyTileField = EMPTY_TILE_FIELD;\n\tthis.nameListDefault = [...NAME_LIST_DEFAULT];\n\tthis.numPlayerDefault = NUM_PLAYER_DEFAULT;\n\n\t//state shared between players\n\tthis.nameListInput = (typeof(playerList) === 'undefined') ? \n\t\tthis.nameListDefault.slice(0, this.numPlayerDefault) : \n\t\t[...playerList];\n\tthis.playerList = (typeof(playerList) === 'undefined') ? \n\t\tthis.nameListDefault.slice(0, this.numPlayerDefault) : \n\t\t[...playerList];\n\tthis.numPlayerSelected = this.playerList.length;\n\tthis.nPlayer = this.playerList.length;\n\tthis.nRepos = 2 * this.nPlayer + 1;\n\tthis.isGameOver = false;\n\tthis.bag = Array.from(\n\t\tArray(N_COLORS), (_, i) => Array(TILES_PER_COLOR).fill(i)\n\t).flat();\n\tthis.usedTiles = [];\n\tthis.repos = Array(this.nRepos).fill().map(\n\t\t_ => Array(TILES_PER_REPO).fill(EMPTY_TILE_FIELD)\n\t);\n\tthis.repos[this.nRepos] = [];//last repo is 'the middle', initially empty;\n\tthis.startingTile = 'middle';\n\tthis.playerAtTurn = getRandomInt(0, this.nPlayer)[0];\n\tthis.playMode = \"predefined\";\n\tthis.wallPattern = Array.from(\n\t\tArray(N_COLORS),\n\t\t(_, j) => Array.from(\n\t\t\tArray(N_COLORS),\n\t\t\t(_, i) => (N_COLORS - i + j) % N_COLORS\n\t\t)\n\t);\n\n\t//player specific state\n\tthis.scores = Array(this.nPlayer).fill(0);\n\tthis.rows = Array(this.nPlayer).fill().map(\n\t\t_ => Array.from(\n\t\t\tArray(N_COLORS), (_, i) => Array(i + 1).fill(EMPTY_TILE_FIELD)\n\t\t)\n\t);\n\tthis.wall = Array(this.nPlayer).fill().map(\n\t\t_ => Array.from(\n\t\t\tArray(N_COLORS), _ => Array(N_COLORS).fill(EMPTY_TILE_FIELD)\n\t\t)\n\t);\n\tthis.penalties = Array(this.nPlayer).fill().map(_ => []);\n\n\t//fill repos separately to facilitate reuse of fillRepos\n\tconst filledRepoState = fillRepos(this);\n\tthis.repos = filledRepoState.repos;\n\tthis.bag = filledRepoState.bag;\n\tthis.usedTiles = filledRepoState.usedTiles;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}